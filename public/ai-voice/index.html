<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Voice Chat with ChatGPT (Natural Voice)</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Roboto', Arial, sans-serif;
  color: #222;
  text-align: center;
  padding: 20px;
  background: #fafafa;
}
#chatbox {
  max-width: 600px;
  margin: 20px auto;
  text-align: left;
  border: 1px solid #ccc;
  padding: 15px;
  border-radius: 15px;
  background-color: #fff;
}
#messages {
  max-height: 350px;
  overflow-y: auto;
  margin-bottom: 10px;
  font-size: 19px;
  line-height: 1.6;
}
.message { margin: 8px 0; }
.message.user { text-align: right; color: #2563eb; }
.message.ai { text-align: left; color: #495057; }

button {
  padding: 12px 25px;
  font-size: 16px;
  margin: 8px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: 0.3s ease;
}
button:hover { opacity: 0.8; }

#playAnswerBtn {
  background-color: #eee;
  color: #111;
  display: none;
}

.speak-button { background-color: white; border: 2px solid #333; color: #333; }
.level-up-button { background-color: #F4A300; }
.level-down-button { background-color: #A3D9A5; }
.toggle-errors-button { background-color: #8FB2F4; }

.translatable-word {
  cursor: pointer;
  transition: background-color 0.2s ease;
}
.translatable-word:hover {
  background-color: #e0e0e0;
}

.translation-popup {
  position: absolute;
  background-color: rgba(0,0,0,0.85);
  color: #fff;
  padding: 5px 10px;
  border-radius: 6px;
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
  pointer-events: none;
  white-space: nowrap;
  z-index: 1000;
}
.translation-popup.show { opacity: 1; }

button:disabled { opacity: 0.5 !important; cursor: not-allowed !important; }
#speakBtn.listening {
  background-color: #d9534f;
  color: white;
  border: 2px solid #d9534f;
  animation: pulse 1.2s infinite;
}

@keyframes pulse {
  0% { box-shadow: 0 0 0 0 rgba(217,83,79,0.7); }
  70% { box-shadow: 0 0 0 10px rgba(217,83,79,0); }
  100% { box-shadow: 0 0 0 0 rgba(217,83,79,0); }
}

/* ================================
   MOBILE UX FIX (iOS / Android)
================================ */

@media (max-width: 768px) {

  body {
    background: #fafafa !important;
    padding: 10px;
  }

  #chatbox {
    max-width: 100%;
    margin: 10px auto;
    padding: 12px;
    border-radius: 14px;
    background-color: #ffffff;
    border: 1px solid #ddd;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  }

  #messages {
    max-height: 60vh;
    font-size: 18px;
    line-height: 1.55;
  }

  .message.user {
    color: #2563eb;        /* niebieski jak na desktopie */
    background: transparent;
  }

  .message.ai {
    color: #374151;        /* ciemny szary, nie czarny */
    background: transparent;
  }

  button {
    font-size: 16px;
    padding: 14px 18px;
    border-radius: 12px;
  }

  .button-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
  }

  #speakBtn {
    flex: 1 1 100%;
    font-size: 18px;
    padding: 16px;
  }

  #playAnswerBtn {
    width: 100%;
    font-size: 16px;
  }
}

.setting-group {
  margin-bottom: 10px;
}

.setting-option {
  margin: 5px 5px 0 0;
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
  cursor: pointer;
  background: #f9f9f9;
}

.setting-option.active {
  background: #2563eb;
  color: white;
  border-color: #2563eb;
}


</style>
</head>

<body>


  <div id="chatbox">
    <div id="messages"></div>

    <button id="playAnswerBtn">üîä Odtw√≥rz odpowied≈∫</button>

    <div class="button-container">
      <button id="speakBtn" class="speak-button">üé§ Speak</button>
      <button class="level-up-button" onclick="levelUp()">Level Up</button>
      <button class="level-down-button" onclick="levelDown()">Level Down</button>
      <button class="toggle-errors-button" id="toggleErrorsButton" onclick="toggleErrorCorrection()">Poprawiaj b≈Çƒôdy</button>
<button id="explainBtn" style="display:none; background:#ffe066; margin-left:10px;">
  üí° Wyja≈õnij b≈ÇƒÖd
</button>

    </div>
  </div>

<!-- SETTINGS BUTTON (BOTTOM) -->
<div style="margin-top: 20px;">
  <button id="settingsBtnBottom">‚öôÔ∏è Ustawienia</button>
</div>

<!-- SETTINGS PANEL -->
<div id="settingsPanel" style="display:none; max-width:600px; margin:10px auto; text-align:left;">
  <div class="setting-group">
    <strong>Jƒôzyk</strong><br>
    <button class="setting-option" data-accent="british">üá¨üáß Brytyjski</button>
    <button class="setting-option" data-accent="american">üá∫üá∏ Ameryka≈Ñski</button>
  </div>

  <div class="setting-group" style="margin-top:10px;">
    <strong>Odpowied≈∫ AI</strong><br>
    <button class="setting-option" data-reply="auto">Automatycznie</button>
    <button class="setting-option" data-reply="manual">Na ≈ºƒÖdanie</button>
  </div>
</div>

<script type="module" src="./js/engine.js"></script>


</body>
</html>
